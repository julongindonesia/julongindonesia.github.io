<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>聚龙健康100指数</title>
    <script src="https://cdn.staticfile.net/jquery/1.10.2/jquery.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .section-header {
            background-color: #e6e6e6;
            font-weight: bold;
        }
        .total-row {
            font-weight: bold;
        }
        #periodSelect {
            width: 200px;
            height: 30px;
            font-family: Arial, sans-serif;
            color: #333;
            border: 1px solid #ccc;
        }
        tr.active, tr.inactive{
          background-color: #ffffff;
        }
    </style>
</head>
<body>
  <h1>聚龙健康100指数</h1>
  <h2>100 Indikator sehat Julong </h2>
  <p>草稿二（更新日期：2024.06.28）</p>
  
  <p>
    <a href="./indonesia.html">Bahasa Indonesia 印尼语</a> &nbsp;&nbsp;&nbsp; 
    <a href="./chinese_indo.html">双语完全版</a> &nbsp;&nbsp;&nbsp;
    <select id="periodSelect">
      <option value="week1">第一周</option>
      <option value="week2">第二周</option>
      <option value="week3">第三周</option>
      <option value="week4">第四周</option>
      <option value="month">月度</option>
    </select>
  </p>

  <br>
  
  <table id="standard">
    <thead id="total">
        <tr class="section-header">
          <td colspan="3"><h3>聚龙健康100指数</h3></td>
          <td colspan="5">总分数：100</td>
        </tr>
    </thead>
    <!-- human -->
    <thead id = "human_resource">
      <tr class="section-header">
        <td colspan="3">一 人</td>
        <td colspan="3">杨义</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='human_resource' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- finance -->
    <thead id = "finance">
      <tr class="section-header">
        <td colspan="3">二 财</td>
        <td colspan="3">侯光珍</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='finance' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- material -->
    <thead id = "material">
      <tr class="section-header">
        <td colspan="3">三 物</td>
        <td colspan="3">孙忠宝</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='material' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- agriculture -->
    <thead id = "agriculture">
      <tr class="section-header">
        <td colspan="3">四 农</td>
        <td colspan="3">皮金鹏</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='agriculture' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- industry -->
    <thead id = "industry">
      <tr class="section-header">
        <td colspan="3">五 工</td>
        <td colspan="3">王涛</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='industry' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- commerce -->
    <thead id = "commerce">
      <tr class="section-header">
        <td colspan="3">六 商</td>
        <td colspan="3">徐传贵</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='commerce' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- big data -->
    <thead id = "big_data">
      <tr class="section-header">
        <td colspan="3">七 4G大数据</td>
        <td colspan="3">杨江树</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='big_data' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- internet -->
    <thead id = "internet">
      <tr class="section-header">
        <td colspan="3">八 5G互联网</td>
        <td colspan="3">胡军</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='internet' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- ai -->
    <thead id = "ai">
      <tr class="section-header">
        <td colspan="3">九 人工智能</td>
        <td colspan="3">雷文忠</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='ai' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>
    <!-- legal -->
    <thead id = "legal">
      <tr class="section-header">
        <td colspan="3">十 法律</td>
        <td colspan="3">杨斌</td>
        <td colspan="2">3</td>
      </tr>
    </thead>
    <tbody id='legal' class="inactive" style="display: none;">
      <tr>
        <th >序号</th>
        <th>分项</th>
        <th>负责人</th>
        <th>前值</th>
        <th>预测值</th>
        <th>实际值</th>
        <th>分数</th>
      </tr>
    </tbody>

  </table>

  <script>
    
    stand_list = ['human_resource','finance','material','agriculture','industry',
      'commerce', 'big_data','internet','ai','legal'
    ]
    section_score= {
      'human_resource':0,
      'finance':0,
      'material':0,
      'agriculture':0,
      'industry':0,
      'commerce':0, 
      'big_data':0,
      'internet':0,
      'ai':0,
      'legal':0
    }

    // 函数：大标题缩放功能
    cs = function(section){
      $('thead#'+section).click(function(){
        var tbody = $('tbody#'+section)
        var singal = tbody.attr('class')
        if(singal == 'active'){
          tbody.attr('style','display:none')
          tbody.attr('class','inactive')
        }else{
          tbody.attr('style','')
          tbody.attr('class','active')
        }
      })
      // 注释缩放功能
      $('tbody#'+section).on('click', '[id^="data_"]', function(){
        var index = this.id.split('_')[1];
        tr_commen = $(`tr#commen_${index}_${section}`)
        var singal = tr_commen.attr('class')
        if(singal == 'active'){
          tr_commen.attr('style','display:none;')
          tr_commen.attr('class','inactive')
        }else{
          tr_commen.attr('style','')
          tr_commen.attr('class','active')
        }
      })
    }

    // 函数：具体指标数据的填写
    input_data = function(section, data_list){
      var section_score = 0
      var tbody = $('tbody#'+section)
      for(var index in data_list){
        var data = data_list[index]
        var add_tr = 
        `<tr id="data_${index}_${section}">
          <th>${data[0]}</th>
          <th>${data[1]}</th>
          <th>${data[2]}</th>
          <th>${data[3]}</th>
          <th>${data[4]}</th>
          <th>${data[5]}</th>
          <th>${data[6]}</th>
        </tr>
        <tr id="commen_${index}_${section}" class="inactive" style="display: none;">
          <th colspan="10">${data[7]}</th>
        </tr>
        `
        tbody.append(add_tr)
        section_score = section_score + data[6]
      }
      return section_score
    }

    // 将总得分写入指定位置
    input_total_score = function(section_score){
      var total = 0
      for(var key in section_score){
        thead_key = $('thead#'+key)
        thead_key.children('tr:nth-child(1)').children('td:nth-child(3)').val(section_score[key])
        console.log(thead_key)
        total = total + section_score[key]
      }
      total_score = '总得分:' + total
      $('thead#total').children('tr:nth-child(1)').children('td:nth-child(2)').val(total_score)
    }

    update_data = function(section, data_list){
      for(var index in data_list){
        data = data_list[index]
        tr_data = $(`tr#data_${index}_${section}`)
        tr_commen = $(`tr#commen_${index}_${section}`)
        for(var i=1; i<=7; i++){
          tr_child = tr_data.children(`th:nth-child(${i})`)
          tr_child.text(data[i-1])
        }
        tr_commen.children('th:nth-child(1)').text(data[7])
      }
    }

    // 函数：渲染数据
    function input_period_data(period) {
        // 获取数据
      file_path = 'score_result.json'
      var score = 0
      var request = new XMLHttpRequest()
      request.open('get', file_path)
      request.send(null)
      request.onload = function(){
        var data = JSON.parse(request.responseText)
        data = data[period]
        // 渲染数据
        for(index in stand_list){
          section = stand_list[index]
          section_score[section] = input_data(section,data[section])
        }
        // 渲染总分数
        input_total_score(section_score)
      }
    }

    function update_period_data(period) {
        // 获取数据
      file_path = 'score_result.json'

      var request = new XMLHttpRequest();
      request.open('get', file_path)
      request.send(null)
      request.onload = function(){
          var data = JSON.parse(request.responseText)
          data = data[period]
          // 渲染数据
          for(index in stand_list){
            update_data(stand_list[index],data[stand_list[index]])
          }
      }
    }

    input_period_data('week1')
    
    // 缩放
    for(index in stand_list){
      cs(stand_list[index])
    }

    $("#periodSelect").change(function(){
      // 根据下拉列表，获取当前时间段
      period = $("#periodSelect").val()
      update_period_data(period)
    })

  </script>
</body>
</html>